{% extends "base.html" %}

{% block title %}Profile Downloader - Download TikTok & Instagram Profiles{% endblock %}
{% block description %}Download all public videos from any TikTok, Instagram, or YouTube channel in one click. Filter by
reels, most liked, and more.{% endblock %}

{% block content %}
<section class="hero" style="padding-top: 4rem; padding-bottom: 2rem;">
    <h1><span class="text-gradient">Profile</span> Downloader</h1>
    <p>Bulk download public videos from TikTok creators, Instagram profiles, or YouTube channels.</p>

    <div style="max-width: 600px; margin: 0 auto; display: flex; flex-direction: column; gap: 1rem;">
        <div class="input-group">
            <input type="text" id="profile-input" placeholder="@username or full profile URL..." autocomplete="off">
            <button id="fetch-profile-btn" class="btn-primary">Load Profile</button>
        </div>
    </div>

    <div id="profile-status" class="hidden" style="margin-top: 1rem; color: var(--primary); font-weight: 500;"></div>
</section>

{% include 'ads.html' %}

<!-- Profile Header Card -->
<section id="profile-header" class="hidden"
    style="max-width: 1200px; margin: 0 auto 2rem; padding: 2rem; background: var(--bg-card); border-radius: 16px; border: 1px solid var(--border); display: flex; gap: 2rem; align-items: center; flex-wrap: wrap;">
    <div style="width: 100px; height: 100px; border-radius: 50%; background: var(--bg-input); overflow: hidden;">
        <img id="prof-avatar" src="" alt="Avatar" style="width: 100%; height: 100%; object-fit: cover;">
    </div>
    <div style="flex: 1;">
        <h2 id="prof-name" style="margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">Username <i
                class="fa-solid fa-circle-check text-primary" style="font-size: 1rem;"></i></h2>
        <p style="color: var(--text-muted);"><span id="prof-platform"
                style="text-transform: capitalize;">Platform</span> â€¢ <strong id="prof-count"
                style="color: var(--text-main);">0</strong> public videos</p>
    </div>
</section>

<!-- Filter & Format Bar -->
<section id="profile-controls" class="hidden"
    style="max-width: 1200px; margin: 0 auto 2rem; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem; padding: 0 1rem;">
    <div style="display: flex; gap: 0.5rem;">
        <button id="prof-select-all" class="btn-secondary" style="padding: 0.5rem 1rem;">Select All</button>
        <button id="prof-deselect-all" class="btn-secondary" style="padding: 0.5rem 1rem;">Clear</button>
    </div>

    <div style="display: flex; gap: 1rem; align-items: center;">
        <select id="prof-format" class="btn-secondary" style="background: var(--bg-input);">
            <option value="mp4,1080p">MP4 1080p (Clean)</option>
            <option value="mp4,720p">MP4 720p (Faster)</option>
            <option value="mp3,192k">MP3 Audio Only</option>
        </select>
    </div>
</section>

<!-- Video Grid -->
<section id="profile-grid" class="hidden"
    style="max-width: 1200px; margin: 0 auto 5rem; padding: 0 1rem; display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem;">
    <!-- Cards injected via JS -->
</section>

<!-- Sticky Selection Bar -->
<div id="sticky-bar" class="hidden"
    style="position: fixed; bottom: 0; left: 0; right: 0; background: rgba(15, 17, 21, 0.95); backdrop-filter: blur(10px); border-top: 1px solid var(--border); padding: 1rem 2rem; z-index: 1000; display: flex; justify-content: space-between; align-items: center; transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);">
    <div>
        <h4 style="margin-bottom: 0.25rem;"><span id="sticky-count">0</span> Videos Selected</h4>
        <p style="color: var(--text-muted); font-size: 0.85rem;">Ready to download</p>
    </div>
    <div style="display: flex; gap: 1rem;">
        <button id="sticky-close" class="btn-secondary" style="border: none;"><i class="fa-solid fa-xmark"></i></button>
        <button id="prof-download-btn" class="btn-primary">Download Items</button>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/profile.js') }}"></script>
{% endblock %}